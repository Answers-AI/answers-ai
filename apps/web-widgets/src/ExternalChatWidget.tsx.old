// import React from 'react';

interface ExternalChatWidgetProps {
  src: string;
}

const ExternalChatWidget: React.FC<ExternalChatWidgetProps> = ({
  src = 'https://localhost:3000/'
}) => {
  return (
    <div
      style={{
        position: 'fixed',
        top: 0,
        right: 0,
        width: '20vw',
        height: '100vh',
        zIndex: 9998,
        display: 'flex',
        borderLeft: 'solid 1px #fff'
      }}>
      <iframe src={src} width="100%" height="100%" style={{ border: 'none' }} />
    </div>
  );
};

// export default ExternalChatWidget;

import React, { useState } from 'react';

interface Props {
  src: string;
  width: string;
  height: string;
}

const ChatButton = ({ src = 'https://lastrev.com', width = '100%', height = '100%' }: Props) => {
  const [isChatOpen, setIsChatOpen] = useState(false);

  const openChat = () => setIsChatOpen(true);

  // Add an event listener to the window object to instantiate the button on load
  window.addEventListener('load', openChat);

  return (
    <>
      {isChatOpen && (
        <div
          style={{
            position: 'fixed',
            right: '0',
            bottom: '0',
            width: '100vw',
            height: '20vh',
            backgroundColor: '#fff',
            boxShadow: '0px 0px 20px rgba(0, 0, 0, 0.2)',
            zIndex: 9999
          }}>
          <iframe src={src} width={width} height={height} frameBorder="0" scrolling="no" />
        </div>
      )}
      {!isChatOpen && (
        <div
          style={{
            position: 'fixed',
            right: '0',
            bottom: '0',
            backgroundColor: '#fff',
            boxShadow: '0px 0px 20px rgba(0, 0, 0, 0.2)',
            borderRadius: '50%',
            width: '60px',
            height: '60px',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            cursor: 'pointer',
            zIndex: 9999
          }}
          onClick={() => setIsChatOpen(true)}>
          open
        </div>
      )}
    </>
  );
};

export default ChatButton;
