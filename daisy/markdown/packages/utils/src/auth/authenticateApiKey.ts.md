Summary:
This code is a module that handles the authentication of an API key. It is responsible for verifying the validity of the API key and returning the corresponding user or organization associated with the key. The module is part of a larger software application that requires authentication for API requests.

Import statements:
- `prisma` is imported from the `@db/client` module. It is used to interact with the database and perform queries.
- `ApiKeyType`, `Organization`, and `User` are imported from the `db/generated/prisma-client` module. These are types generated by Prisma based on the database schema.

Script Summary:
The script exports a function named `authenticateApiKey` that takes a request object (`req`) as a parameter and returns a promise that resolves to an `AuthenticateApiKeyResult` or `null`. The `AuthenticateApiKeyResult` type is defined as either a `user` or an `organization` object.

Internal Functions:
- `authenticateApiKey`: This function takes a request object as a parameter and verifies the API key provided in the request headers. It replaces the 'Bearer ' prefix in the token and queries the database to find the corresponding API key. If a matching API key is found, it checks the type of the key (user or organization) and returns the corresponding result object. If no matching API key is found, it returns `null`.

External Functions:
- None

Interaction Summary:
This module interacts with the Prisma database client (`prisma`) to query the database for the API key. It relies on the `prisma.apiKey.findUnique` method to find the API key based on the provided token. The result of the query is used to determine the type of the API key and retrieve the associated user or organization.

Developer Questions:
- How can I modify the authentication logic to support additional types of API keys?
- What happens if the API key is expired or revoked? How can I handle such cases?
- How can I add logging or error handling to this module to track authentication attempts or handle errors gracefully?

Known Issues or Bugs:
- None

Todo Items:
- None